<!doctype html>
<html>
    <head>
        <title>Online Minesweeper</title>
    </head>
    
    <body style="margin: 0px; border: 0px; padding: 0px">
        <canvas id="canvas" width="800" height="800" oncontextmenu="return false" style="margin: 0"></canvas>

        <script type='application/javascript' src="TileView.js"></script>
        <script type='application/javascript' src="TileMap.js"></script>
        <script type='application/javascript' src="MineSocket.js"></script>

        <script>
            let images = {
                'unrevealed': 'tiles/unrevealed.png',
                'flag': 'tiles/flag.png'
            }
            for (let i=0; i<=8; i++) {
                images[i] = `tiles/${i}.png`
            }
            images[10] = 'tiles/unrevealed.png';
            images[11] = 'tiles/flag.png';
            images[12] = 'tiles/mine.png';
            images[13] = 'tiles/clickedmine.png';
            const tileMap = new TileMap(images);
            const tileView = new TileView(canvas, 16, tileMap);

            const ws = new WebSocket("ws://localhost:8081");
            ws.onopen = () => {
                const mineSocket = new MineSocket(ws, tileMap, tileView);
            }
        </script>
    </body>
</html>